<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CEREBREXIA'25 - My Profile</title>

<!-- ==== FONTS ==== -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Savate:wght@518&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Exo:wght@400;700;900&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">

<!-- ==== CSS LIBRARIES ==== -->
<link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<!-- ==== FIREBASE SDKs ==== -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-analytics.js"></script>


<style>
    :root {
        --primary-glow-color: #50c8ff;
        --secondary-glow-color: #7efcff;
        --text-color: #ffffff;
        --dark-bg: #0a0e1a;
        --medium-bg: #10182c;
        --title-box-bg: #2a3045;
        --title-box-border: #607080;
        --button-blue: #007bff;
        --icon-blue: #3cb5f5;
        --medical-icon-color: #ffffff;
    }

    html { background-color: #0d001f; scroll-behavior: smooth; }
    body, html { margin: 0; padding: 0; min-height: 100vh; font-family: 'Kanit', sans-serif; color: var(--text-color); overflow-x: hidden; }
    body { background-color: transparent; position: relative; }

    #page-background-video-player { /* Optional, if you want video on this page */
        position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
        object-fit: cover; z-index: -1; filter: brightness(0.6);
    }
    .page-content-wrapper { position: relative; z-index: 1; background-color: transparent; padding-top: 80px; /* Header height */ }
    .container { max-width: 960px; margin: 0 auto 40px; padding: 20px; }

    /* ==== HEADER STYLES (from index.html template) ==== */
    header {
        position: fixed; top: 0; left: 0; width: 100%;
        background: rgba(13, 0, 31, 0.85); backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px);
        z-index: 1000; transition: transform 0.3s ease; padding: 15px 20px;
        display: flex; flex-direction: row; align-items: center; justify-content: space-between;
    }
    header.hidden { transform: translateY(-100%); }
    header.visible { transform: translateY(0); }
    .logo { font-family: 'Savate', sans-serif; font-size: 3rem; font-weight: 518; color: yellow; user-select: none; text-decoration: none; z-index: 1001; }
    .new-menu-toggle-button { background: transparent; border: none; color: #fff; cursor: pointer; padding: 10px; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 1101; transition: transform 0.3s ease; }
    .new-menu-toggle-button .icon-bar { display: block; width: 30px; height: 3px; background-color: #fff; margin: 6px 0; transition: transform 0.3s ease, opacity 0.3s ease, background-color 0.3s ease; border-radius: 1px; }
    .new-menu-toggle-button:hover .icon-bar { background-color: #ff00ff; }
    .new-menu-toggle-button.open .icon-bar:nth-child(1) { transform: translateY(9px) rotate(45deg); }
    .new-menu-toggle-button.open .icon-bar:nth-child(2) { opacity: 0; }
    .new-menu-toggle-button.open .icon-bar:nth-child(3) { transform: translateY(-9px) rotate(-45deg); }

    #fullScreenNav { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(13, 0, 31, 0.97); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); z-index: 1100; display: flex; flex-direction: column; align-items: center; justify-content: center; opacity: 0; visibility: hidden; transition: opacity 0.5s ease, visibility 0s linear 0.5s; overflow-y: auto; }
    #fullScreenNav.active { opacity: 1; visibility: visible; transition: opacity 0.5s ease, visibility 0s linear 0s; }
    #fullScreenNav ul { list-style: none; padding: 0; margin: 0; text-align: center; }
    #fullScreenNav li { margin: 20px 0; } /* Adjust as needed for more links */
    #fullScreenNav a { font-family: 'Exo', sans-serif; font-weight: 400; font-size: clamp(1.8rem, 4vw, 2.5rem); /* Slightly smaller for more links */ color: #fff; text-decoration: none; padding: 8px 20px; /* Adjust padding */ display: inline-block; position: relative; transition: color 0.4s ease, transform 0.4s ease; letter-spacing: 1px; text-transform: uppercase; }
    #fullScreenNav a.active-nav-link { color: #ffd700; /* Gold color for active link */ transform: translateY(-5px) scale(1.05); }
    #fullScreenNav a::before, #fullScreenNav a::after { content: ''; position: absolute; width: 100%; height: 3px; background: linear-gradient(90deg, #ff00ff, #ffae00, #00ffff, #ff00ff); background-size: 300% 100%; left: 0; transition: transform 0.4s ease, opacity 0.4s ease; animation: borderFlow 8s linear infinite; }
    #fullScreenNav a::before { top: 0; transform: scaleX(0); transform-origin: left; }
    #fullScreenNav a::after { bottom: 0; transform: scaleX(0); transform-origin: right; }
    #fullScreenNav a:hover, #fullScreenNav a:focus { color: #ffdd57; transform: translateY(-5px) scale(1.05); }
    #fullScreenNav a:hover::before, #fullScreenNav a:focus::before { transform: scaleX(1); transform-origin: right; }
    #fullScreenNav a:hover::after, #fullScreenNav a:focus::after { transform: scaleX(1); transform-origin: left; }
    @keyframes borderFlow { 0% { background-position: 0% 50%; } 100% { background-position: 300% 50%; } }
    #fullScreenNav .nav-close-btn { position: absolute; top: 25px; right: 25px; background: transparent; color: #fff; border: none; font-size: 2.5rem; font-weight: bold; cursor: pointer; z-index: 1201; transition: color 0.3s ease, transform 0.3s ease; line-height: 1; }
    #fullScreenNav .nav-close-btn:hover { color: #ff00ff; transform: rotate(90deg) scale(1.1); }

    /* ==== PROFILE PAGE SPECIFIC STYLES ==== */
    h1.page-title {
        font-family: 'Exo', sans-serif; font-weight: 900;
        font-size: clamp(2.2rem, 6vw, 3rem); color: #ffffff; text-align: center; margin-bottom: 40px;
        text-shadow: 0 0 10px rgba(255, 255, 255, 0.6), 0 0 20px rgba(255, 0, 255, 0.4);
    }
    .profile-section, .form-section {
        background: rgba(30, 10, 50, 0.7); /* Slightly different bg for profile sections */
        border: 1px solid rgba(255,0,255,0.3);
        border-radius: 15px; padding: 25px 30px; margin-bottom: 30px;
        box-shadow: 0 0 25px rgba(255,0,255,0.25), inset 0 0 10px rgba(255,0,255,0.1);
    }
    .profile-section h2, .form-section h2 {
        font-family: 'Exo', sans-serif; font-size: clamp(1.5rem, 4vw, 2rem); color: #ff99ff;
        margin-bottom: 25px; border-bottom: 2px solid rgba(255,153,255,0.4);
        padding-bottom: 10px; display: flex; align-items: center;
    }
    .profile-section h2 .fas, .form-section h2 .fas { margin-right: 12px; } /* Icon spacing */

    .profile-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; }
    .info-item { background: rgba(255,255,255,0.04); padding: 15px; border-radius: 8px; border-left: 4px solid #ff00ff; transition: background-color 0.3s ease; }
    .info-item:hover { background-color: rgba(255,255,255,0.08); }
    .info-item strong { display: block; color: #ffc4ff; font-size: 0.9rem; margin-bottom: 5px; text-transform: uppercase; letter-spacing: 0.5px; }
    .info-item span, .info-item a { color: #e0e0e0; font-size: 1.1rem; word-break: break-all; }
    #qrCodeContainer img { display: block; margin: 15px auto; max-width: 220px; border: 3px solid #ff00ff; padding: 8px; border-radius: 10px; background: white; box-shadow: 0 0 15px rgba(255,0,255,0.5); }

    /* New Form Styles */
    .form-group { margin-bottom: 20px; }
    .form-group label { display: block; font-weight: 500; margin-bottom: 8px; color: #ffc4ff; }
    .form-group input, .form-group select {
        width: 100%; background-color: rgba(10,0,20,0.5); border: 1px solid rgba(255,255,255,0.3);
        border-radius: 8px; padding: 12px; color: #fff; font-size: 1rem;
        transition: border-color 0.3s, box-shadow 0.3s;
    }
    .form-group input:focus, .form-group select:focus {
        outline: none; border-color: #ff00ff; box-shadow: 0 0 10px rgba(255,0,255,0.5);
    }
    .form-group input[readonly] { background-color: rgba(0,0,0,0.2); color: #aaa; cursor: not-allowed; }
    .form-group select option { background-color: #1a052a; color: #fff; }

    /* Buttons */
    .btn {
        border: none; padding: 12px 24px; border-radius: 8px;
        font-size: 1.1rem; font-weight: 600; /* Slightly bolder */ cursor: pointer;
        transition: all 0.3s ease; /* Smoother transition for all properties */
        display: inline-flex; align-items: center; gap: 10px;
        text-transform: uppercase; letter-spacing: 0.5px;
    }
    .btn-primary { background-color: #ff00ff; color: white; box-shadow: 0 3px 12px rgba(255,0,255,0.4); }
    .btn-primary:hover { background-color: #e600e6; transform: translateY(-2px) scale(1.02); box-shadow: 0 5px 18px rgba(255,0,255,0.6); }
    .btn-google { background-color: #dd4b39; color: white; box-shadow: 0 3px 12px rgba(221,75,57,0.4); }
    .btn-google:hover { background-color: #c23321; transform: translateY(-2px) scale(1.02); box-shadow: 0 5px 18px rgba(194,51,33,0.6); }
    .btn-signout { background-color: #4a5568; /* Tailwind gray-700 ish */ color: white; padding: 10px 20px; font-size: 1rem; box-shadow: 0 3px 12px rgba(74,85,104,0.3); }
    .btn-signout:hover { background-color: #2d3748; /* Tailwind gray-800 ish */ transform: translateY(-2px) scale(1.02); box-shadow: 0 5px 18px rgba(45,55,72,0.5); }

    /* Other states */
    .loading-message, .auth-container { text-align: center; font-size: 1.3rem; padding: 40px; color: #f0c4ff; }
    .message-error { color: #ff5555; background-color: rgba(255,0,0,0.1); border: 1px solid #ff4d4d; text-align:center; padding:15px; border-radius:8px; margin-top:20px; }
    .no-data-message { text-align: center; font-size: 1.1rem; color: #aaa; padding: 20px; border: 1px dashed rgba(255,255,255,0.2); border-radius: 8px;}

    /* Coordinator Dashboard */
    .coordinator-dashboard { border-left: 5px solid #00ffff; background: rgba(0, 50, 50, 0.7); }
    .coordinator-dashboard h2 { color: #00ffff; border-bottom-color: rgba(0, 255, 255, 0.3); }
    .stat-card {
        background: rgba(0, 255, 255, 0.08); border: 1px solid rgba(0, 255, 255, 0.2);
        padding: 20px; border-radius: 10px; text-align: center; transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .stat-card:hover { transform: translateY(-5px); box-shadow: 0 5px 20px rgba(0,255,255,0.3); }
    .stat-card .stat-number { font-family: 'Exo', sans-serif; font-size: 2.5rem; font-weight: 700; color: #00ffff; }
    .stat-card .stat-label { font-size: 1rem; color: #99ffff; text-transform: uppercase; }

    /* ==== FOOTER STYLES (from index.html template) ==== */
    .site-footer { background-color: #1a1a2e; color: #e0e0e0; padding: 30px 20px 30px; font-family: 'Kanit', sans-serif; margin-top: 60px; border-top: 3px solid #3a3a5e; box-shadow: 0 -5px 15px rgba(25, 25, 46, 0.5); }
    .footer-diagram-feature { padding: 40px 20px; margin-bottom: 30px; border-bottom: 1px solid #2a2a4e; text-align: center; }
    .footer-diagram-title-wrapper { margin-bottom: 25px; display: inline-block; }
    .footer-diagram-title { background-color: var(--title-box-bg); border: 2px solid var(--title-box-border); border-radius: 12px; padding: 8px 35px; box-shadow: 0 0 8px rgba(0,0,0,0.4), inset 0 0 4px rgba(255,255,255,0.1), 0 0 12px var(--primary-glow-color); display: inline-block; }
    .footer-diagram-title h3 { font-family: 'Orbitron', sans-serif; font-size: 2em; color: var(--text-color); margin: 0; font-weight: 700; text-shadow: 0 0 4px var(--text-color), 0 0 8px var(--primary-glow-color); }
    .footer-diagram-area { width: 100%; max-width: 600px; margin: 0 auto 25px auto; position: relative; }
    #footer-tech-diagram-svg { width: 100%; height: auto; filter: drop-shadow(0 0 8px var(--primary-glow-color)); }
    .footer-diagram-tagline { font-size: 1em; line-height: 1.6; color: #bbb; margin-bottom: 30px; max-width: 450px; margin-left: auto; margin-right: auto; text-shadow: 0 0 4px rgba(0,0,0,0.6); }
    .footer-diagram-contact-button { display: inline-block; background-color: var(--button-blue); color: var(--text-color); padding: 10px 30px; border-radius: 25px; text-decoration: none; font-size: 1.1em; font-weight: 700; transition: all 0.3s ease; box-shadow: 0 0 8px var(--button-blue), 0 0 15px var(--button-blue); }
    .footer-diagram-contact-button:hover { background-color: #0056b3; box-shadow: 0 0 12px var(--button-blue), 0 0 25px var(--button-blue), inset 0 0 4px rgba(255,255,255,0.2); transform: translateY(-2px); }
    .svg-line { stroke: var(--primary-glow-color); stroke-width: 1.5; stroke-linecap: round; }
    .svg-node-dot { fill: var(--secondary-glow-color); }
    .svg-circle-bg { fill: #080c14e0; }
    .svg-circle-border { stroke: var(--primary-glow-color); stroke-width: 2; fill: none; }
    .svg-icon { fill: var(--medical-icon-color); filter: drop-shadow(0 0 3px var(--secondary-glow-color)); }
    .svg-text-main { font-family: 'Roboto', sans-serif; fill: var(--text-color); font-weight: 700; text-anchor: middle; dominant-baseline: middle; filter: drop-shadow(0 0 5px var(--primary-glow-color)); }
    .svg-text-arrows { fill: var(--secondary-glow-color); font-size: 1.5em; text-anchor: middle; dominant-baseline: middle; }
    .footer-container-new { max-width: 1200px; margin: 0 auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 35px; }
    .footer-section-new { padding: 10px; }
    .footer-heading-new { font-size: 1.6em; font-weight: 600; color: #f9c74f; margin-bottom: 25px; position: relative; padding-left: 20px; font-family: 'Exo', sans-serif; }
    .footer-heading-new::before { content: '●'; color: #f9c74f; position: absolute; left: 0; top: 50%; transform: translateY(-50%); font-size: 0.8em; }
    .footer-quick-links-list { list-style: none; padding: 0; margin: 0; display: flex; flex-wrap: wrap; }
    .footer-quick-links-list li { margin-right: 12px; margin-bottom: 12px; }
    .footer-quick-links-list li a { display: inline-block; background-color: #2a2a4e; color: #ffffff; padding: 12px 22px; text-decoration: none; border-radius: 25px; font-size: 1.1em; font-weight: 500; transition: background-color 0.3s ease, transform 0.2s ease; border: 1px solid #3a3a5e; }
    .footer-quick-links-list li a:hover, .footer-quick-links-list li a:focus { background-color: #f9c74f; color: #1a1a2e; transform: translateY(-2px); }
    .footer-contact-info p { font-size: 1.1em; margin-bottom: 12px; line-height: 1.7; color: #d0d0d0; }
    .footer-contact-info p a { color: #a0cff0; text-decoration: none; transition: color 0.3s ease; }
    .footer-contact-info p a:hover { color: #f9c74f; text-decoration: underline; }
    .footer-social-icons-new { margin-top: 20px; display: flex; gap: 15px; }
    .footer-social-icons-new a { display: inline-block; color: #e0e0e0; font-size: 1.8rem; transition: transform 0.3s ease, color 0.3s ease; }
    .footer-social-icons-new a:hover { transform: scale(1.15) translateY(-2px); color: #f9c74f; }
    .footer-social-icons-new .fa-instagram:hover { color: #E1306C; } .footer-social-icons-new .fa-youtube:hover { color: #FF0000; } .footer-social-icons-new .fa-facebook-f:hover { color: #1877F2; } .footer-social-icons-new .fa-twitter:hover { color: #1DA1F2; } .footer-social-icons-new .fa-linkedin-in:hover { color: #0A66C2; } .footer-social-icons-new .fa-whatsapp:hover { color: #25D366; }
    .footer-bottom-new { text-align: center; margin-top: 40px; padding-top: 25px; border-top: 1px solid #3a3a5e; font-size: 0.95em; color: #a0a0a0; }
     /* Scroll to top button */
    .scroll-top-btn { position: fixed; bottom: 20px; right: 20px; background: rgba(13,0,31,0.85); color: #fff; border: none; border-radius: 5px; padding: 10px 15px; cursor: pointer; opacity: 0; visibility: hidden; transition: opacity .3s ease,visibility .3s ease; z-index: 1000; }
    .scroll-top-btn.show { opacity: 1; visibility: visible; }
    .scroll-top-btn:hover { background: #ff00ff; }

    @media (max-width: 768px) {
        .page-content-wrapper { padding-top: 70px; }
        .container { padding: 15px; }
        h1.page-title { font-size: 2rem; }
        .profile-section h2, .form-section h2 { font-size: 1.7rem; }
        .footer-diagram-title h3 {font-size: 1.8em;}
        .footer-diagram-area { max-width: 90%; }
        .footer-container-new { grid-template-columns: 1fr; text-align: center; }
        .footer-heading-new { padding-left: 0; justify-content: center; }
        .footer-heading-new::before { left: 50%; transform: translateX(-50%) translateY(-50%); }
        .footer-quick-links-list, .footer-social-icons-new { justify-content: center; }
    }
    @media (max-width: 600px) {
        .page-content-wrapper { padding-top: 60px; }
        .logo { font-size: 2.2rem; }
        header { padding: 10px 15px;}
        h1.page-title { font-size: 1.8rem; }
        .profile-section h2, .form-section h2 { font-size: 1.5rem; }
        .footer-diagram-title h3 {font-size: 1.5em;}
        .footer-diagram-tagline {font-size: 0.9em;}
        .footer-diagram-contact-button {font-size: 1em; padding: 8px 25px;}
        .footer-quick-links-list li a { font-size: 1em; padding: 10px 18px; }
    }

</style>
</head>
<body>
<!-- Optional Background Video -->
<video id="page-background-video-player" autoplay loop muted playsinline poster="images/bg1_poster.jpg">
    <source src="images/bgmain.mp4" type="video/mp4">
    <!-- Make sure this path is correct if profile.html is in a subfolder -->
    Aapka browser video tag support nahi karta.
</video>

<!-- Header -->
<header class="visible">
    <a href="index.html" class="logo">CEREBREXIA</a> <!-- Ensure 'index.html' path is correct -->
    <button class="new-menu-toggle-button" id="newMenuToggleButton" aria-label="Open navigation menu" aria-expanded="false">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
</header>
<div id="fullScreenNav">
    <button class="nav-close-btn" id="navCloseButton" aria-label="Close navigation menu">&times;</button>
    <ul>
        <!-- Ensure these paths are correct if profile.html is in a subfolder -->
        <li><a href="index.html">HOME</a></li>
        <li><a href="events.html">EVENTS</a></li>
        <li><a href="pronite.html">PRONITES</a></li>
        <li><a href="register.html">REGISTER</a></li>
        <li><a href="merch.html">MERCHANDISE</a></li>
        <li><a href="accomodation.html">ACCOMMODATION</a></li>
        <li><a href="schedule.html">SCHEDULE</a></li>
        <li><a href="profile.html" class="active-nav-link">PROFILE</a></li>
    </ul>
</div>

<!-- Page Content -->
<div class="page-content-wrapper">
<main class="container">
    <h1 class="page-title">My Profile</h1>

    <div id="authContainer" class="auth-container" data-aos="fade-in">
        <p class="mb-6 text-lg">Sign in to view your profile and registrations.</p>
        <button id="googleSignInButton" class="btn btn-google">
            <i class="fab fa-google"></i> Sign in with Google
        </button>
    </div>

    <div id="loadingMessage" class="loading-message" style="display: none;">
        <i class="fas fa-spinner fa-spin fa-2x"></i>
        <p>Loading your profile...</p>
    </div>

    <div id="profileFormContainer" class="form-section" style="display: none;" data-aos="fade-up">
        <h2><i class="fas fa-user-edit"></i> Complete Your Profile</h2>
        <p class="mb-6 text-gray-300">Welcome to CEREBREXIA! Please fill out your details to continue.</p>
        <form id="profileForm">
            <div class="form-group">
                <label for="formName">Full Name</label>
                <input type="text" id="formName" readonly>
            </div>
            <div class="form-group">
                <label for="formEmail">Email Address</label>
                <input type="email" id="formEmail" readonly>
            </div>
            <div class="form-group">
                <label for="formPhone">Phone Number</label>
                <input type="tel" id="formPhone" placeholder="Enter your 10-digit phone number" required pattern="[0-9]{10}">
            </div>
            <div class="form-group">
                <label for="formCollege">Select Your College</label>
                <select id="formCollege" required>
                    <option value="" disabled selected>-- Please select --</option>
                    <option value="IGIMS, Patna">IGIMS, Patna</option>
                    <option value="AIIMS, Patna">AIIMS, Patna</option>
                    <option value="PMCH, Patna">PMCH, Patna</option>
                    <option value="NMCH, Patna">NMCH, Patna</option>
                    <option value="DMCH, Darbhanga">DMCH, Darbhanga</option>
                    <option value="SKMCH, Muzaffarpur">SKMCH, Muzaffarpur</option>
                    <option value="ANMMCH, Gaya">ANMMCH, Gaya</option>
                    <option value="JLNMCH, Bhagalpur">JLNMCH, Bhagalpur</option>
                    <option value="VIMS, Pawapuri">VIMS, Pawapuri</option>
                    <option value="GMC, Bettiah">GMC, Bettiah</option>
                    <option value="ESIC Medical College, Bihta">ESIC Medical College, Bihta</option>
                    <option value="Other">Other</option>
                </select>
            </div>
            <button type="submit" class="btn btn-primary mt-4">
                <i class="fas fa-save"></i> Save and Continue
            </button>
        </form>
    </div>

    <div id="profileContent" style="display: none;">
        <div class="text-right mb-5">
            <button id="signOutButton" class="btn btn-signout">Sign Out</button>
        </div>

        <section class="profile-section" data-aos="fade-up">
            <h2><i class="fas fa-user-circle"></i> My Details</h2>
            <div class="profile-grid">
                <div class="info-item"><strong>Name:</strong><span id="userName">N/A</span></div>
                <div class="info-item"><strong>Email:</strong><span id="userEmail">N/A</span></div>
                <div class="info-item"><strong>College:</strong><span id="userCollege">N/A</span></div>
                <div class="info-item"><strong>Phone:</strong><span id="userPhone">N/A</span></div>
                 <div class="info-item"><strong>User ID:</strong><span id="userDisplayID" class="text-xs">N/A</span></div>
            </div>
        </section>

        <section class="profile-section" data-aos="fade-up" data-aos-delay="100">
            <h2><i class="fas fa-ticket-alt"></i> My Fest Pass</h2>
            <div id="festPassDetails"><p class="no-data-message">You have not registered for the fest yet.</p></div>
        </section>

        <section class="profile-section" data-aos="fade-up" data-aos-delay="200">
            <h2><i class="fas fa-calendar-check"></i> My Registered Events</h2>
            <div id="registeredEventsList"><p class="no-data-message">No event registrations found.</p></div>
        </section>

        <section id="coordinatorSection" class="profile-section coordinator-dashboard" style="display: none;" data-aos="fade-up" data-aos-delay="300">
            <h2><i class="fas fa-chart-line"></i> Coordinator Dashboard</h2>
            <div class="profile-grid">
                 <div class="stat-card">
                    <div id="totalFestRegistrations" class="stat-number">--</div>
                    <div class="stat-label">Total Fest Registrations</div>
                </div>
                 <div class="stat-card">
                    <div id="totalEventEntries" class="stat-number">--</div>
                    <div class="stat-label">Total Event Entries</div>
                </div>
                 <div class="stat-card">
                    <div id="totalRevenue" class="stat-number">₹ --</div>
                    <div class="stat-label">Total Revenue Collected</div>
                </div>
            </div>
            <div class="mt-6">
                <h3 class="text-xl font-semibold mb-4 text-cyan-300">Registrations per Event</h3>
                <div id="eventBreakdown" class="no-data-message">Loading event data...</div>
            </div>
        </section>
    </div>

    <div id="errorMessage" class="message-error" style="display:none;"></div>
</main>
</div>

<!-- Footer -->
<footer class="site-footer">
    <div class="footer-diagram-feature" data-aos="fade-up">
        <div class="footer-diagram-title-wrapper">
            <div class="footer-diagram-title">
                <h3>CEREBREXIA VERSE</h3>
            </div>
        </div>
        <div class="footer-diagram-area">
             <svg id="footer-tech-diagram-svg" viewBox="0 0 600 400" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <defs>
                    <symbol id="icon-stethoscope" viewBox="0 0 24 24"><path d="M18 3H6c-1.1 0-2 .9-2 2v1H2.5C2.22 6 2 6.22 2 6.5S2.22 7 2.5 7H4v1c0 2.56 1.67 4.72 4 5.66V17H6.5c-.28 0-.5.22-.5.5s.22.5.5.5H8v1.5c0 .28.22.5.5.5s.5-.22.5-.5V18h1v-1.5c0-.98.46-1.85 1.2-2.42.4-.31.87-.58 1.4-.76.4-.14.78-.31 1.13-.51.4-.22.75-.48 1.06-.78.47-.47.81-1.04.99-1.65.04-.15.06-.3.06-.45V6c0-1.1-.9-2-2-2zm-2 3v.09c0 .43-.17.84-.47 1.15-.3.3-.7.46-1.12.46H9.59c-.42 0-.82-.16-1.12-.46-.3-.3-.47-.72-.47-1.15V6h8zm-3.5 10.5c-.28 0-.5.22-.5.5s.22.5.5.5h1.5c.28 0 .5-.22.5-.5s-.22-.5-.5-.5h-1.5zM6 9.22C5.07 8.7 4.42 7.77 4.16 6.69 4.06 6.28 4 5.87 4 5.46V5h12v.46c0 .41-.06.82-.16 1.23-.26 1.08-.91 2.01-1.84 2.53-.47.26-.88.6-1.21.99L12 11l-.79-.78c-.33-.39-.74-.73-1.21-.99z"/></symbol>
                    <symbol id="icon-heart-pulse" viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35zM7.5 5C5.52 5 4 6.52 4 8.5c0 2.72 2.65 5.2 6.55 8.58L12 18.17l1.45-1.09C17.35 13.7 20 11.22 20 8.5c0-1.98-1.52-3.5-3.5-3.5-1.74 0-3.41.81-4.5 2.09C10.91 5.81 9.24 5 7.5 5zm13.21-1.21L19.5 5l-1.71 1.71-1.21-1.21-1.21 1.21L14.17 5l-1.21 1.21-1.21-1.21-1.21 1.21-1.21-1.21L6.5 5 4.79 3.79 3.58 5l1.21 1.21 1.21-1.21L7.17 5l1.21 1.21 1.21-1.21 1.21 1.21 1.21-1.21L13.5 5l1.71 1.71 1.21-1.21 1.21 1.21 1.71-1.71z"/></symbol>
                    <symbol id="icon-dna-helix" viewBox="0 0 24 24"><path d="M14.5 4c1.08 0 1.96.92 1.96 2.05 0 .2-.04.39-.09.58l-1.4 5.37h.01c.7-.62 1.12-1.51 1.12-2.5 0-1.77-1.31-3.22-3-3.46V4m-5 0v2.04c-1.69.24-3 1.69-3 3.46 0 .99.42 1.88 1.12 2.5h.01L6.63 6.63c-.05-.19-.09-.38-.09-.58C6.54 4.92 7.42 4 8.5 4M12 9c.83 0 1.5.67 1.5 1.5S12.83 12 12 12s-1.5-.67-1.5-1.5S11.17 9 12 9m2.5 6c-1.08 0-1.96-.92-1.96-2.05 0-.2.04-.39.09-.58l1.4-5.37h-.01c-.7.62-1.12 1.51-1.12 2.5 0 1.77 1.31 3.22 3 3.46V15m-5 0v-2.04c1.69-.24 3-1.69 3-3.46 0-.99-.42-1.88-1.12-2.5h-.01l1.41 5.37c.05.19.09.38.09.58 0 1.13-.88 2.05-1.96 2.05M12 17c-.83 0-1.5-.67-1.5-1.5S11.17 14 12 14s1.5.67 1.5 1.5S12.83 17 12 17m0-10c.28 0 .5.22.5.5V9h-.02c-.93-.24-1.9-.24-2.96 0H9V7.5c0-.28.22-.5.5-.5h.58c.95 0 1.85-.14 2.67-.37l.08-.02c.05-.01.1-.01.16-.01zm0 8c-.28 0-.5-.22-.5-.5V15h.02c.93.24 1.9.24 2.96 0H15v1.5c0 .28-.22.5-.5.5h-.58c-.95 0-1.85.14-2.67.37l-.08.02c-.05.01-.1.01-.16-.01z"/></symbol>
                    <symbol id="icon-microscope" viewBox="0 0 24 24"><path d="M16.5 6c-1.08 0-2 .92-2 2.05V10h-1V8.05c0-1.13-.92-2.05-2-2.05H10V3H8v3H6.5c-1.13 0-2.05.92-2.05 2.05V10H3v2h1.45V10c0-.64.29-1.21.76-1.6.47-.39 1.05-.6 1.69-.6H8v2h1V8.05c0-.64.29-1.21.76-1.6.47-.39 1.05-.6 1.69-.6h1.05v1.95H13v-2h1.5c.64 0 1.22.21 1.69.6.47.39.76.96.76 1.6V12h1.45v-2H16.5V8.05C16.5 6.92 15.58 6 14.5 6h-2c-1.08 0-2 .92-2 2.05V10h-1V8.05c0-1.13-.92-2.05-2-2.05S6.5 6.92 6.5 8.05V10H3v2h1.45V10A2.5 2.5 0 016.5 7.5H8v2h1V7.5A2.5 2.5 0 0111.5 5h1A2.5 2.5 0 0115 7.5V10h1.45v-2H16.5V8.05A2.5 2.5 0 0014.5 6M12 13c-1.93 0-3.5 1.57-3.5 3.5V21h7v-4.5c0-1.93-1.57-3.5-3.5-3.5zm0 1c1.38 0 2.5 1.12 2.5 2.5V20h-5v-3.5c0-1.38 1.12-2.5 2.5-2.5z"/></symbol>
                    <symbol id="icon-rod-of-asclepius" viewBox="0 0 24 24"><path d="M13.82 5.32c-.93-.89-2.18-1.32-3.48-1.32s-2.55.43-3.48 1.32C6 6.21 5.61 7.42 5.61 8.77c0 1.35.39 2.56 1.28 3.45.93.89 2.18 1.32 3.48 1.32s2.55-.43 3.48-1.32c.89-.89 1.28-2.1 1.28-3.45 0-1.35-.39-2.56-1.28-3.45M10.34 12c-1.31 0-2.4-.48-3.17-1.29-.77-.81-1.17-1.85-1.17-3.04 0-1.19.4-2.23 1.17-3.04.77-.81 1.86-1.29 3.17-1.29 1.31 0 2.4.48 3.17 1.29.77.81 1.17 1.85 1.17 3.04 0 1.19-.4 2.23-1.17 3.04-.77.81-1.86 1.29-3.17 1.29m.16 1.5c.34 0 .67.03.99.08v.02c.69.1 1.35.31 1.95.61l.01.01c.29.15.57.32.83.51l.01.01c.22.16.43.34.62.53l.01.01c.14.14.27.29.39.45l.01.01c.09.12.17.24.24.37.2.35.35.73.43 1.13l.01.06v.01c.04.22.06.44.06.67v2.09c0 .28-.22.5-.5.5h-1c-.28 0-.5-.22-.5-.5v-1.88c0-.47-.15-.92-.43-1.28-.1-.13-.21-.25-.33-.36-.18-.17-.38-.32-.6-.45-.29-.18-.6-.33-.93-.45-.48-.18-1-.29-1.53-.33h-.01c-.18-.01-.36-.02-.54-.02s-.36.01-.54.02h-.01c-.53.04-1.05.15-1.53.33-.33.12-.64.27-.93.45-.22.13-.42.28-.6.45-.12.11-.23.23-.33.36-.28.36-.43.81-.43 1.28v1.88c0 .28-.22.5-.5.5h-1c-.28 0-.5-.22-.5-.5v-2.09c0-.23.02-.45.06-.67v-.01l.01-.06c.08-.4.23-.78.43-1.13.07-.13.15-.25.24-.37l.01-.01c.12-.16.25-.31.39-.45l.01-.01c.19-.19.4-.37.62-.53l.01-.01c.26-.19.54-.36.83-.51l.01-.01c.6-.3 1.26-.51 1.95-.61v-.02c.32-.05.65-.08.99-.08z"/></symbol>
                    <symbol id="icon-brain" viewBox="0 0 24 24"><path d="M12 2C9.46 2 7.24 3.22 6 5.06c-1.01 1.52-1.59 3.29-1.59 5.11S4.99 13.67 6 15.2c.47.6 1.02 1.12 1.63 1.56.04.03.09.06.13.09C8.32 17.27 9 17.58 9 18.22V19c0 .94.44 1.79 1.15 2.36.05.04.1.08.15.12.72.54 1.79.62 2.7.62.91 0 1.98-.08 2.7-.62.05-.04.1-.08.15-.12.71-.57 1.15-1.42 1.15-2.36v-.78c0-.64.68-.95 1.24-1.37.04-.03.09-.06.13-.09.61-.44 1.16-.96 1.63-1.56 1.01-1.52 1.59-3.29 1.59-5.11S19.01 6.58 18 5.06C16.76 3.22 14.54 2 12 2m4.1 13.6c-.3.35-.65.66-1.02.93-.05.04-.1.07-.15.1-.73.53-1.13 1.28-1.13 2.15v.72c0 .41-.17.78-.45 1.04-.03.02-.06.04-.09.06-.37.28-.9.4-1.36.4s-.99-.12-1.36-.4c-.03-.02-.06-.04-.09-.06-.28-.26-.45-.63-.45-1.04v-.72c0-.87-.4-1.62-1.13-2.15-.05-.03-.1-.06-.15-.1-.37-.26-.72-.58-1.02-.93C7.21 14.07 7 12.87 7 11.63c0-1.29.28-2.55.82-3.66.44-.92 1.07-1.72 1.86-2.37.6-.48 1.29-.8 2.03-.95.73-.15 1.48-.15 2.21 0 .75.15 1.43.47 2.03.95.79.65 1.42 1.45 1.86 2.37.54 1.11.82 2.37.82 3.66 0 1.24-.21 2.44-.6 3.47m-2.1-5.1c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5c0 .46.21.88.55 1.16-.48.24-.8.75-.8 1.34 0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5c0-.59-.32-1.1-.8-1.34.34-.28.55-.7.55-1.16m-4 0c0-.83-.67-1.5-1.5-1.5S9 9.67 9 10.5c0 .46.21.88.55 1.16-.48.24-.8.75-.8 1.34 0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5c0-.59-.32-1.1-.8-1.34.34-.28.55-.7.55-1.16z"/></symbol>
                    <symbol id="icon-medical-plus" viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></symbol>
                    <symbol id="icon-atom" viewBox="0 0 24 24"><path d="M12 2c-2.36 0-4.48.77-6.23 2.11l1.01 1.74C8.04 4.79 9.92 4 12 4s3.96.79 5.22 1.85l1.01-1.74C16.48 2.77 14.36 2 12 2m0 16c-2.08 0-3.96-.79-5.22-1.85l-1.01 1.74c1.75 1.34 3.87 2.11 6.23 2.11s4.48-.77 6.23-2.11l-1.01-1.74c-1.26 1.06-3.14 1.85-5.22 1.85M5.92 7.32C4.79 8.58 4 10.27 4 12s.79 3.42 1.92 4.68l1.74-1.01C6.79 14.4 6 13.29 6 12s.79-2.4 1.66-3.67l-1.74-1.01M18.08 7.32l-1.74 1.01C17.21 9.6 18 10.71 18 12s-.79 2.4-1.66 3.67l1.74 1.01C19.21 15.42 20 13.73 20 12s-.79-3.42-1.92-4.68M12 7a5 5 0 100 10 5 5 0 000-10m0 2a3 3 0 110 6 3 3 0 010-6z"/></symbol>
                    <symbol id="icon-test-tube" viewBox="0 0 24 24"><path d="M7 2v11.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V6h2v9.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V2H7zm10 0v2h-2V2h2zm-2 4h2v2h-2V6zm2 4h-2v2h2v-2zM6 19c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm8-13.22L12.78 7H14v1h-2.22L10.56 9H12v1h-2.44L8.34 11H10v1H8v1h1.78l1.22 1H18V2h-4v3.78zM16 11h-1.11l-.89-1H16v1zm0-2h-2.22l-.89-1H16v1zm0-2h-3.33l-.89-1H16v1z"/></symbol>
                    <symbol id="icon-sparkle" viewBox="0 0 24 24"><path d="M12 2l1.5 4.5h4.5l-3.5 3 1.5 5-4.5-3.5-4.5 3.5 1.5-5-3.5-3h4.5L12 2z"/></symbol>
                    <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
                        <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
                        <feMerge> <feMergeNode in="coloredBlur"/> <feMergeNode in="SourceGraphic"/> </feMerge>
                    </filter>
                </defs>
                <line class="svg-line" x1="300" y1="200" x2="150" y2="80" /><line class="svg-line" x1="300" y1="200" x2="80" y2="200" /><line class="svg-line" x1="300" y1="200" x2="150" y2="320" /><line class="svg-line" x1="300" y1="200" x2="450" y2="80" /><line class="svg-line" x1="300" y1="200" x2="520" y2="200" /><line class="svg-line" x1="300" y1="200" x2="450" y2="320" /><line class="svg-line" x1="150" y1="80" x2="80" y2="200" /><line class="svg-line" x1="80" y1="200" x2="150" y2="320" /><line class="svg-line" x1="450" y1="80" x2="520" y2="200" /><line class="svg-line" x1="520" y1="200" x2="450" y2="320" /><line class="svg-line" x1="150" y1="80" x2="300" y2="50" /><line class="svg-line" x1="450" y1="80" x2="300" y2="50" /><line class="svg-line" x1="150" y1="320" x2="230" y2="360" /><line class="svg-line" x1="450" y1="320" x2="370" y2="360" />
                <circle class="svg-circle-bg" cx="300" cy="200" r="70"/><circle class="svg-circle-border" cx="300" cy="200" r="70" filter="url(#glow)"/><text class="svg-text-main" x="300" y="190" font-size="14px">CONNECTING</text><text class="svg-text-main" x="300" y="210" font-size="14px">MEDICS</text><text class="svg-text-arrows" x="300" y="155">⬆</text> <text class="svg-text-arrows" x="300" y="245">⬇</text><text class="svg-text-arrows" x="255" y="200">⬅</text> <text class="svg-text-arrows" x="345" y="200">➡</text><text class="svg-text-arrows" transform="translate(268 168) rotate(-45)" >↖</text><text class="svg-text-arrows" transform="translate(332 168) rotate(45)">↗</text><text class="svg-text-arrows" transform="translate(268 232) rotate(45)">↙</text><text class="svg-text-arrows" transform="translate(332 232) rotate(-45)">↘</text>
                <g transform="translate(150, 80)"><circle class="svg-circle-bg" r="35"/><circle class="svg-circle-border" r="35" filter="url(#glow)"/><use xlink:href="#icon-stethoscope" width="40" height="40" x="-20" y="-20" class="svg-icon"/></g>
                <g transform="translate(80, 200)"><circle class="svg-circle-bg" r="35"/><circle class="svg-circle-border" r="35" filter="url(#glow)"/><use xlink:href="#icon-heart-pulse" width="40" height="40" x="-20" y="-20" class="svg-icon"/></g>
                <g transform="translate(150, 320)"><circle class="svg-circle-bg" r="35"/><circle class="svg-circle-border" r="35" filter="url(#glow)"/><use xlink:href="#icon-dna-helix" width="38" height="38" x="-19" y="-19" class="svg-icon"/></g>
                <g transform="translate(450, 80)"><circle class="svg-circle-bg" r="35"/><circle class="svg-circle-border" r="35" filter="url(#glow)"/><use xlink:href="#icon-microscope" width="40" height="40" x="-20" y="-20" class="svg-icon"/></g>
                <g transform="translate(520, 200)"><circle class="svg-circle-bg" r="35"/><circle class="svg-circle-border" r="35" filter="url(#glow)"/><use xlink:href="#icon-rod-of-asclepius" width="38" height="38" x="-19" y="-19" class="svg-icon"/></g>
                <g transform="translate(450, 320)"><circle class="svg-circle-bg" r="35"/><circle class="svg-circle-border" r="35" filter="url(#glow)"/><use xlink:href="#icon-brain" width="40" height="40" x="-20" y="-20" class="svg-icon"/></g>
                <g transform="translate(300, 50)"><circle class="svg-circle-bg" r="25"/><circle class="svg-circle-border" r="25" filter="url(#glow)"/><use xlink:href="#icon-medical-plus" width="30" height="30" x="-15" y="-15" class="svg-icon"/></g>
                <g transform="translate(230, 360)"><circle class="svg-circle-bg" r="25"/><circle class="svg-circle-border" r="25" filter="url(#glow)"/><use xlink:href="#icon-atom" width="30" height="30" x="-15" y="-15" class="svg-icon"/></g>
                <g transform="translate(370, 360)"><circle class="svg-circle-bg" r="25"/><circle class="svg-circle-border" r="25" filter="url(#glow)"/><use xlink:href="#icon-test-tube" width="30" height="30" x="-15" y="-15" class="svg-icon"/></g>
                <g transform="translate(80, 120)"><circle class="svg-circle-bg" r="20"/><circle class="svg-circle-border" r="20" filter="url(#glow)"/><use xlink:href="#icon-sparkle" width="25" height="25" x="-12.5" y="-12.5" class="svg-icon"/></g>
                <g transform="translate(520, 120)"><circle class="svg-circle-bg" r="20"/><circle class="svg-circle-border" r="20" filter="url(#glow)"/><use xlink:href="#icon-sparkle" width="25" height="25" x="-12.5" y="-12.5" class="svg-icon"/></g>
                <circle class="svg-node-dot" cx="300" cy="200" r="3" filter="url(#glow)"/><circle class="svg-node-dot" cx="150" cy="80" r="3" filter="url(#glow)"/><circle class="svg-node-dot" cx="80" cy="200" r="3" filter="url(#glow)"/><circle class="svg-node-dot" cx="150" cy="320" r="3" filter="url(#glow)"/><circle class="svg-node-dot" cx="450" cy="80" r="3" filter="url(#glow)"/><circle class="svg-node-dot" cx="520" cy="200" r="3" filter="url(#glow)"/><circle class="svg-node-dot" cx="450" cy="320" r="3" filter="url(#glow)"/><circle class="svg-node-dot" cx="300" cy="50" r="3" filter="url(#glow)"/><circle class="svg-node-dot" cx="230" cy="360" r="3" filter="url(#glow)"/><circle class="svg-node-dot" cx="370" cy="360" r="3" filter="url(#glow)"/><circle class="svg-node-dot" cx="80" cy="120" r="3" filter="url(#glow)"/><circle class="svg-node-dot" cx="520" cy="120" r="3" filter="url(#glow)"/>
            </svg>
        </div>
        <p class="footer-diagram-tagline">
            Back again to make you guys vibe, Get stress free and enjoy the fest to its fullest
        </p>
        <a href="mailto:thecerebrexia17@gmail.com" class="footer-diagram-contact-button">CONTACT ORGANIZERS</a>
    </div>

    <div class="footer-container-new">
      <div class="footer-section-new">
        <h3 class="footer-heading-new">Connect</h3>
        <div class="footer-social-icons-new">
          <a href="https://facebook.com/cerebrexia" target="_blank" aria-label="Facebook" title="Facebook"><i class="fab fa-facebook-f"></i></a>
          <a href="https://www.instagram.com/igimsfest/" target="_blank" rel="noopener noreferrer" aria-label="Instagram" title="Instagram"><i class="fab fa-instagram"></i></a>
          <a href="https://twitter.com/cerebrexia" target="_blank" aria-label="Twitter" title="Twitter"><i class="fab fa-twitter"></i></a>
          <a href="https://linkedin.com/company/cerebrexia" target="_blank" aria-label="LinkedIn" title="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
          <a href="https://www.youtube.com/@cerebrexia" target="_blank" aria-label="YouTube" title="YouTube"><i class="fab fa-youtube"></i></a>
          <a href="https://whatsapp.com/channel/0029VbA0P20HbFV2ke5rlR2G" target="_blank" rel="noopener noreferrer" aria-label="WhatsApp Channel" title="WhatsApp Channel"><i class="fab fa-whatsapp"></i></a>
        </div>
         <p style="margin-top: 15px; font-size: 1em; color: #b0b0c0;">Stay connected for live updates!</p>
      </div>

      <div class="footer-section-new">
        <h3 class="footer-heading-new">Quick Links</h3>
        <ul class="footer-quick-links-list">
          <li><a href="index.html">Home</a></li>
          <li><a href="events.html">Events</a></li>
          <li><a href="schedule.html">Schedule</a></li>
          <li><a href="pronite.html">Pronites</a></li>
          <li><a href="#team">Team</a></li> <!-- This link might need adjustment if #team is not on all pages -->
          <li><a href="accommodation.html">Accommodation</a></li>
          <li><a href="register.html">Delegate Registration</a></li>
          <li><a href="privacypolicy.html">Privacy Policy</a></li>
          <li><a href="terms.html">Terms of Service</a></li>
          <li><a href="codeofconduct.html">Code of Conduct</a></li>
        </ul>
      </div>

      <div class="footer-section-new">
        <h3 class="footer-heading-new">Contact</h3>
        <div class="footer-contact-info">
          <p>Email: <a href="mailto:info@cerebrexia25.com">info@cerebrexia25.com</a></p>
          <p>Pankaj Kumar: <a href="tel:+919079956283">+91 90799 56283</a></p>
          <p>Dhananjay Kumar: <a href="tel:+917425992291">+91 74259 92291</a></p>
          <p style="margin-top:15px;">IGIMS Patna Campus,<br/>Sheikhpura, Patna, Bihar - 800014</p>
        </div>
      </div>
    </div>
    <div class="footer-bottom-new">
      <p>&copy; <span id="currentYear"></span> CEREBREXIA'25 - IGIMS Patna. All Rights Reserved. Designed with <i class="fas fa-heart" style="color: #ff00ff;"></i>.</p>
    </div>
</footer>
<button class="scroll-top-btn" aria-label="Scroll to top">&#9650;</button>

<script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
<script>
    AOS.init({ duration: 1000, once: false, mirror: true });

    // --- START FIREBASE CONFIG ---
    const firebaseConfig = {
        apiKey: "AIzaSyBOWumY95hdMt2uOvmJEk5WG0GhdqUHUNc", // Replace with your actual Firebase API Key
        authDomain: "cerebrexia-ee068.firebaseapp.com",
        projectId: "cerebrexia-ee068",
        storageBucket: "cerebrexia-ee068.appspot.com", // Corrected typical Firebase Storage Bucket
        messagingSenderId: "328864114758",
        appId: "1:328864114758:web:108968f6576b6967f14247",
        measurementId: "G-6Z6EP1ZTEJ"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();
    const analytics = firebase.analytics(); // Initialize Analytics if needed
    const googleProvider = new firebase.auth.GoogleAuthProvider();
    // --- END FIREBASE CONFIG ---


    // --- Element Selectors ---
    const authContainer = document.getElementById('authContainer');
    const googleSignInButton = document.getElementById('googleSignInButton');
    const signOutButton = document.getElementById('signOutButton');
    const loadingMessageDiv = document.getElementById('loadingMessage');
    const profileFormContainer = document.getElementById('profileFormContainer');
    const profileForm = document.getElementById('profileForm');
    const profileContentDiv = document.getElementById('profileContent');
    const errorMessageDiv = document.getElementById('errorMessage');
    const coordinatorSection = document.getElementById('coordinatorSection');
    const userDisplayIDSpan = document.getElementById('userDisplayID');
    const festPassDetailsDiv = document.getElementById('festPassDetails'); // For basic registration details
    const registeredEventsListDiv = document.getElementById('registeredEventsList'); // For individual event registrations

    // --- Utility Functions ---
    const showView = (viewElement) => {
        // Hide all main containers first
        authContainer.style.display = 'none';
        loadingMessageDiv.style.display = 'none';
        profileFormContainer.style.display = 'none';
        profileContentDiv.style.display = 'none';
        errorMessageDiv.style.display = 'none'; // Always hide error messages when changing views

        // Show the requested view
        if (viewElement) {
            viewElement.style.display = 'block';
        }
    };

    const displayError = (message) => {
        errorMessageDiv.textContent = message;
        errorMessageDiv.style.display = 'block';
    };

    // --- Firebase Authentication State Change Listener ---
    auth.onAuthStateChanged(user => {
        if (user) {
            showView(loadingMessageDiv);
            checkUserProfile(user);
        } else {
            showView(authContainer);
        }
    });

    // --- Check User Profile in Firestore ---
    async function checkUserProfile(user) {
        const userProfileRef = db.collection('users').doc(user.uid);
        try {
            const doc = await userProfileRef.get();
            if (doc.exists) {
                const profileData = doc.data();
                displayUserProfile(user, profileData);
                // Fetch and display fest pass (basic registration) and event registrations
                fetchAndDisplayRegistrations(user.uid);

                // Check for coordinator status
                if (profileData.isCoordinator === true) {
                    coordinatorSection.style.display = 'block';
                    fetchCoordinatorData();
                } else {
                    coordinatorSection.style.display = 'none';
                }
            } else {
                // New user, show the profile completion form
                document.getElementById('formName').value = user.displayName || '';
                document.getElementById('formEmail').value = user.email || '';
                showView(profileFormContainer);
            }
        } catch (error) {
            console.error("Error checking user profile:", error);
            displayError("Error loading your profile. Please try again.");
            showView(authContainer); // Fallback to auth container on error
        }
    }

    // --- Display User Profile Details ---
    function displayUserProfile(user, profileData) {
        document.getElementById('userName').textContent = profileData.name || 'N/A';
        document.getElementById('userEmail').textContent = user.email; // Always from Firebase Auth
        document.getElementById('userCollege').textContent = profileData.college || 'N/A';
        document.getElementById('userPhone').textContent = profileData.phone || 'N/A';
        userDisplayIDSpan.textContent = user.uid; // Display Firebase User ID
        showView(profileContentDiv);
        AOS.refresh(); // Refresh AOS animations for dynamically shown content
    }

    // --- Profile Form Submission (Basic Info Collection) ---
    profileForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        const user = auth.currentUser;
        if (!user) {
            displayError("You are not signed in!");
            return;
        }

        const phoneInput = document.getElementById('formPhone').value;
        const collegeInput = document.getElementById('formCollege').value;

        // Basic validation
        if (!/^\d{10}$/.test(phoneInput)) {
            alert('Please enter a valid 10-digit phone number.');
            return;
        }
        if (collegeInput === "" || collegeInput === "-- Please select --") {
            alert('Please select your college.');
            return;
        }

        const profileData = {
            name: document.getElementById('formName').value,
            email: document.getElementById('formEmail').value,
            phone: phoneInput,
            college: collegeInput,
            // isBasicRegistered flag will indicate that this initial form is filled
            isBasicRegistered: true,
            createdAt: firebase.firestore.FieldValue.serverTimestamp(),
            isCoordinator: false // Default, can be manually set true in Firestore console for specific users
        };

        try {
            // Save/update user profile in 'users' collection
            await db.collection('users').doc(user.uid).set(profileData, { merge: true }); // Use merge:true to avoid overwriting other fields

            // After successful profile save, checkUserProfile again to transition to profile content
            checkUserProfile(user);
            alert('Your profile has been saved successfully!'); // Optional success message
        } catch (error) {
            console.error("Error saving profile:", error);
            displayError("Could not save profile. Please try again.");
        }
    });

    // --- Fetch and Display Fest Pass (Basic Registration) & Event Registrations ---
    async function fetchAndDisplayRegistrations(userId) {
        // Clear previous data
        festPassDetailsDiv.innerHTML = '<p class="no-data-message">Loading fest pass status...</p>';
        registeredEventsListDiv.innerHTML = '<p class="no-data-message">Loading event registrations...</p>';

        console.log("--- fetchAndDisplayRegistrations started ---");
        console.log("Fetching for userId:", userId);

        // Fetch Fest Pass (Basic Registration)
        try {
            const basicRegQuery = db.collection('festRegistrations').where('userId', '==', userId).orderBy('registeredAt', 'desc').limit(1);
            const basicRegSnapshot = await basicRegQuery.get();

            console.log("Firestore snapshot empty:", basicRegSnapshot.empty); // Log if snapshot is empty

            if (!basicRegSnapshot.empty) {
                const basicReg = basicRegSnapshot.docs[0].data();
                console.log("Found fest registration data:", basicReg); // Log the actual data received
                console.log("Payment Status:", basicReg.paymentStatus); // Log payment status
                console.log("QR Codes for Group (new array):", basicReg.qrCodesForGroup); // Log the new array

                let qrCodeSectionHTML = '';

                // Check for new qrCodesForGroup array first (for individual QRs)
                if (basicReg.paymentStatus === 'completed' && basicReg.qrCodesForGroup && basicReg.qrCodesForGroup.length > 0) {
                    console.log("Condition met: payment completed and qrCodesForGroup exists.");
                    qrCodeSectionHTML += `
                        <h3 class="text-center font-semibold text-green-400 my-4">Your Fest Entry QR Code${basicReg.qrCodesForGroup.length > 1 ? 's' : ''}:</h3>
                        <div class="qr-codes-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 20px; margin-top: 20px;">
                    `;
                    basicReg.qrCodesForGroup.forEach(qrInfo => {
                        qrCodeSectionHTML += `
                            <div class="qr-item" style="background-color: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px; text-align: center; border: 1px solid rgba(0,255,255,0.2); box-shadow: 0 0 10px rgba(0,255,255,0.2);">
                                <img src="${qrInfo.qrCodeUrl}" alt="${qrInfo.name} QR Code" style="max-width: 120px; height: auto; border: 2px solid #00ffff; padding: 5px; background: white; border-radius: 5px; margin-bottom: 8px;"/>
                                <p style="margin: 0; font-size: 0.9em; color: #ccc; font-weight: 500;">${qrInfo.name}${qrInfo.isLeader ? ' (Leader)' : ''}</p>
                            </div>
                        `;
                    });
                    qrCodeSectionHTML += `</div>`;
                } else if (basicReg.paymentStatus === 'pending') {
                    console.log("Payment is pending.");
                    qrCodeSectionHTML = `<p class="text-center font-semibold text-yellow-400 my-2">Your payment is pending. The QR code will be visible after payment confirmation.</p>`;
                } else {
                    console.log("Payment status not completed or no QR code data found.");
                    // Fallback for cases where qrCodesForGroup might not be present (e.g., old registrations)
                    // or if it's an individual registration but qrCodesForGroup is empty for some reason.
                    if (basicReg.qrCode) { // Use the single qrCode field if it exists
                         qrCodeSectionHTML = `<div id="qrCodeContainer"><p class="text-center font-semibold text-green-400 my-2">Your Fest Entry QR Code:</p><img src="${basicReg.qrCode}" alt="Fest Pass QR Code"></div>`;
                    } else {
                        qrCodeSectionHTML = '<p class="no-data-message">No QR code found for this registration.</p>';
                    }
                }

                festPassDetailsDiv.innerHTML = `
                    <div class="info-item mb-2"><strong>Registration ID:</strong> ${basicRegSnapshot.docs[0].id}</div>
                    <div class="info-item mb-2"><strong>Status:</strong> <span class="font-bold ${basicReg.paymentStatus === 'completed' ? 'text-green-400' : 'text-yellow-400'}">${basicReg.paymentStatus || 'N/A'}</span></div>
                    <div class="info-item mb-2"><strong>Enrollment Type:</strong> ${basicReg.enrollmentType === 'group' ? `Group (${basicReg.numMembers} members)` : 'Individual'}</div>
                    <div class="info-item mb-2"><strong>Amount Paid:</strong> ₹${basicReg.amount != null ? basicReg.amount : 'N/A'}</div>
                    ${basicReg.paymentId ? `<div class="info-item mb-2"><strong>Payment ID:</strong> ${basicReg.paymentId}</div>` : ''}
                    ${qrCodeSectionHTML}
                `;
            } else {
                console.log("No fest registration found for this user.");
                const userDoc = await db.collection('users').doc(userId).get();
                if (userDoc.exists && userDoc.data().isBasicRegistered) {
                    console.log("User has basic profile but no fest pass.");
                    festPassDetailsDiv.innerHTML = '<p class="no-data-message">You have not purchased the main Fest Pass yet. Please <a href="register.html" class="text-cyan-400 hover:underline">Register Now!</a></p>';
                } else {
                    console.log("User does not have basic profile completed.");
                    festPassDetailsDiv.innerHTML = '<p class="no-data-message">Please complete your profile to register for the Fest Pass.</p>';
                }
            }
        } catch(error) {
            console.error("Error fetching fest pass in profile.html:", error);
            festPassDetailsDiv.innerHTML = '<p class="message-error">Could not load fest pass details. (Error: ' + error.message + ')</p>';
        }
        console.log("--- fetchAndDisplayRegistrations finished ---");

        // Fetch Event Registrations (this part is unchanged)
        try {
            const eventsRegQuery = db.collection('eventRegistrations').where('userId', '==', userId).orderBy('registeredAt', 'desc');
            const eventsSnapshot = await eventsRegQuery.get();

            if (!eventsSnapshot.empty) {
                let eventsHtml = '<ul class="space-y-3">';
                eventsSnapshot.forEach(doc => {
                    const event = doc.data();
                    eventsHtml += `
                    <li class="p-4 bg-opacity-50 bg-gray-700 rounded-lg shadow-md border border-gray-600">
                        <div class="font-bold text-lg text-fuchsia-300">${event.eventName || 'Unnamed Event'}</div>
                        <div><strong>Fee:</strong> ${event.amount > 0 ? `₹${event.amount}` : (event.amount === 0 ? 'Free' : 'N/A')}</div>
                        <div><strong>Status:</strong> <span class="font-bold ${event.paymentStatus === 'completed' ? 'text-green-400' : (event.paymentStatus === 'pending' ? 'text-yellow-400' : 'text-red-400')}">${event.paymentStatus || 'N/A'}</span></div>
                        ${event.teamDetails ? `<div><strong>Team:</strong> ${event.teamDetails.teamName || 'N/A'}</div>` : ''}
                        ${event.paymentId ? `<div><strong>Payment ID:</strong> ${event.paymentId}</div>` : ''}
                        ${event.registeredAt && event.registeredAt.seconds ? `<div><strong>Date:</strong> ${new Date(event.registeredAt.seconds * 1000).toLocaleDateString()}</div>` : ''}
                    </li>`;
                });
                eventsHtml += '</ul>';
                registeredEventsListDiv.innerHTML = '<h3 class="text-xl font-semibold mb-4 text-fuchsia-300">My Individual Event Entries:</h3>' + eventsHtml; // Added a header for clarity
            } else {
                registeredEventsListDiv.innerHTML = '<p class="no-data-message">You have not registered for any individual events.</p>';
            }
        } catch(error) {
            console.error("Error fetching event registrations:", error);
            registeredEventsListDiv.innerHTML = '<p class="message-error">Could not load event registration details.</p>';
        }
    }

    // --- Fetch Coordinator Dashboard Data ---
    async function fetchCoordinatorData() {
        const totalFestRegsSpan = document.getElementById('totalFestRegistrations');
        const totalEventEntriesSpan = document.getElementById('totalEventEntries');
        const totalRevenueSpan = document.getElementById('totalRevenue');
        const eventBreakdownDiv = document.getElementById('eventBreakdown');

        try {
            // Total Fest Registrations (only completed)
            const festRegsSnapshot = await db.collection('festRegistrations').where('paymentStatus', '==', 'completed').get();
            totalFestRegsSpan.textContent = festRegsSnapshot.size;

            // Total Event Entries (only completed)
            const eventRegsSnapshot = await db.collection('eventRegistrations').where('paymentStatus', '==', 'completed').get();
            totalEventEntriesSpan.textContent = eventRegsSnapshot.size;

            // Total Revenue
            let totalRevenue = 0;
            festRegsSnapshot.forEach(doc => { totalRevenue += doc.data().amount || 0; });
            eventRegsSnapshot.forEach(doc => { totalRevenue += doc.data().amount || 0; });
            totalRevenueSpan.textContent = `₹ ${totalRevenue.toFixed(2)}`;

            // Event Breakdown
            const eventsCount = {};
            eventRegsSnapshot.forEach(doc => {
                const eventName = doc.data().eventName;
                if (eventName) {
                    eventsCount[eventName] = (eventsCount[eventName] || 0) + 1;
                }
            });

            if (Object.keys(eventsCount).length > 0) {
                let breakdownHtml = '<ul class="space-y-2">';
                for (const eventName in eventsCount) {
                    breakdownHtml += `<li class="info-item"><strong>${eventName}:</strong> ${eventsCount[eventName]} Registrations</li>`;
                }
                breakdownHtml += '</ul>';
                eventBreakdownDiv.innerHTML = breakdownHtml;
            } else {
                eventBreakdownDiv.innerHTML = '<p class="no-data-message">No completed event registrations yet.</p>';
            }

        } catch (error) {
            console.error("Error fetching coordinator data:", error);
            totalFestRegsSpan.textContent = 'Error';
            totalEventEntriesSpan.textContent = 'Error';
            totalRevenueSpan.textContent = 'Error';
            eventBreakdownDiv.innerHTML = '<p class="message-error">Could not load coordinator data.</p>';
        }
    }

    // --- Sign-in / Sign-out Event Listeners ---
    googleSignInButton.addEventListener('click', () => {
        auth.signInWithPopup(googleProvider).catch(error => {
            console.error("Google Sign-In Error:", error);
            displayError(`Google Sign-In Failed: ${error.message}`);
        });
    });
    signOutButton.addEventListener('click', () => {
        auth.signOut().catch(error => {
            console.error("Sign Out Error:", error);
            displayError(`Sign Out Failed: ${error.message}`);
        });
    });

    // --- Unified Menu, Footer Year, Scroll-to-Top JS (from template) ---
    document.getElementById('currentYear').textContent = new Date().getFullYear();
    const newMenuToggleButton = document.getElementById('newMenuToggleButton');
    const fullScreenNav = document.getElementById('fullScreenNav');
    const mainBody = document.body;
    const navCloseButton = document.getElementById('navCloseButton');
    let headerScrollLastTop = 0;
    const siteHeader = document.querySelector('header');

    if (siteHeader) {
        window.addEventListener('scroll', () => {
            let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            if (scrollTop > headerScrollLastTop && scrollTop > siteHeader.offsetHeight) {
                siteHeader.classList.add('hidden'); siteHeader.classList.remove('visible');
            } else {
                siteHeader.classList.remove('hidden'); siteHeader.classList.add('visible');
            }
            headerScrollLastTop = scrollTop <= 0 ? 0 : scrollTop;
        });
    }

    if (newMenuToggleButton && fullScreenNav && navCloseButton) {
        const toggleMenu = (force) => {
            const isActive = typeof force === 'boolean' ? force : !fullScreenNav.classList.contains('active');
            newMenuToggleButton.classList.toggle('open', isActive);
            fullScreenNav.classList.toggle('active', isActive);
            mainBody.style.overflow = isActive ? 'hidden' : '';
            if (siteHeader && isActive) { // Ensure header is visible when menu is open
                siteHeader.classList.remove('hidden'); siteHeader.classList.add('visible');
            }
        };
        newMenuToggleButton.addEventListener('click', () => toggleMenu());
        navCloseButton.addEventListener('click', () => toggleMenu(false));
        fullScreenNav.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                // Check if the link is for the current page to avoid unnecessary menu close/reopen
                if (link.href === window.location.href || link.getAttribute('href') === window.location.pathname || (link.getAttribute('href') === 'profile.html' && window.location.pathname.endsWith('/profile.html'))) {
                    // If it's the active link for the current page, just close the menu
                    if(fullScreenNav.classList.contains('active')) {
                        toggleMenu(false);
                    }
                } else {
                    // For other links, standard behavior
                    toggleMenu(false);
                }
            });
        });
        document.addEventListener('keydown', e => e.key === 'Escape' && fullScreenNav.classList.contains('active') && toggleMenu(false));
    }
    const scrollTopBtn = document.querySelector('.scroll-top-btn');
    if (scrollTopBtn) {
        window.addEventListener('scroll', () => {
            if (window.scrollY > window.innerHeight / 2) { scrollTopBtn.classList.add('show'); }
            else { scrollTopBtn.classList.remove('show'); }
        });
        scrollTopBtn.addEventListener('click', () => { window.scrollTo({ top: 0, behavior: 'smooth' }); });
    }
</script>
</body>
</html>
